#!/bin/bash


GREEN='\033[0;32m'
RED='\033[0;31m'
NC='\033[0m'

show_user_info() {
    echo -e "${GREEN}--- Information about User and OS ---${NC}"
    echo "User: $(id -un)"
    echo "UID: $(id -u)"
    echo "Group: $(id -gn)"
    echo "OS: $(uname -o)"
    echo "Kernel version: $(uname -r)"
    
    if command -v lsb_release &> /dev/null; then
        echo "Distribution: $(lsb_release -d | cut -f2)"
    else
        if [ -f /etc/os-release ]; then
            echo "Distribution: $(grep PRETTY_NAME /etc/os-release | cut -d'"' -f2)"
        else
            echo "Distribution: N/A"
        fi
    fi
}

list_home_files() {
    echo -e "${GREEN}--- Contents of the home directory $HOME ---${NC}"
    ls -la "$HOME"
}

create_file_with_permissions() {
    read -p "Enter the full path to the file: " file_path
    
    if [ -z "$file_path" ]; then
        echo -e "${RED}Error: file path cannot be empty.${NC}"
        return 1
    fi
    
    dir=$(dirname "$file_path")
    
    if [ ! -d "$dir" ]; then
        echo -e "${RED}Error: directory $dir is not found.${NC}"
        return 1
    fi
    
    read -p "Enter permissions (e.g., 755, 644): " perms
    

    if [[ ! "$perms" =~ ^[0-7]{3,4}$ ]]; then
        echo -e "${RED}Error: invalid permissions format. Use 3 or 4 digits (0-7).${NC}"
        return 1
    fi
    
    touch "$file_path"
    chmod "$perms" "$file_path"
    
    if [ $? -eq 0 ]; then
        echo -e "${GREEN}File '$file_path' created with permissions $perms.${NC}"
        echo "File details:"
        ls -la "$file_path"
    else
        echo -e "${RED}Failed to create file.${NC}"
    fi
}

ping_host() {
    read -p "Enter domain or IP for ping: " target
    
    if [ -z "$target" ]; then
        echo -e "${RED}Error: target cannot be empty.${NC}"
        return 1
    fi
    
    echo -e "${GREEN}Sending 3 packets to $target...${NC}"
    ping -c 3 "$target"
    
    if [ $? -ne 0 ]; then
        echo -e "${RED}Ping failed. Check target address or network connection.${NC}"
    fi
}

while true; do
    echo ""
    echo "--- Interactive Menu ---"
    echo "1) User and OS information"
    echo "2) List files in home directory"
    echo "3) Create file with permissions"
    echo "4) Ping resource"
    echo "5) Exit"
    read -p "Your choice (1-5): " option
    
    case "$option" in
        1) show_user_info ;;
        2) list_home_files ;;
        3) create_file_with_permissions ;;
        4) ping_host ;;
        5) 
            echo "Exiting..."
            break 
            ;;
        *) 
            echo -e "${RED}Invalid option. Please choose 1-5.${NC}"
            ;;
    esac
done

exit 0
