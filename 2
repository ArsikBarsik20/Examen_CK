#!/bin/bash

# Colours
RED='\033[0;31m'
GREEN='\033[0;32m'
NC='\033[0m'

show_user_info() {
    echo -e "${GREEN}——— Information about User and OS ———${NC}"
    echo "User: $(id -un)"
    echo "UID:  $(id -u)"
    echo "Group: $(id -gn)"
    echo "OS:   $(uname -o)"
    echo "Kernel version: $(uname -r)"

    if command -v lsb_release &> /dev/null; then
        lsb_release -a 2> /dev/null | grep Description
    else
        grep PRETTY_NAME /etc/os-release
    fi
}

list_home_files() {
    echo -e "${GREEN}——— Contents of the home directory ($HOME) ———${NC}"
    ls -la "$HOME"
}

create_file_with_permissions() {
    read -p "Enter the full path to the file: " file_path
    read -p "Enter access rights (e.g., 755): " perms

    dir=$(dirname "$file_path")

    if [ ! -d "$dir" ]; then
        echo -e "${RED}Error: directory $dir not found.${NC}"
        return
    fi

    touch "$file_path" && chmod "$perms" "$file_path"

    if [ $? -eq 0 ]; then
        echo -e "${GREEN}File '$file_path' created with permissions $perms.${NC}"
    else
        echo -e "${RED}Failed to create file or apply permissions.${NC}"
    fi
}

ping_host() {
    read -p "Enter domain or IP for ping: " target
    echo -e "${GREEN}Sending 3 packets to $target...${NC}"
    ping -c 3 "$target"
}

while true; do
    echo ""
    echo "——— Interactive Menu ———"
    echo "1) User and OS information"
    echo "2) List files in home directory"
    echo "3) Create file with permissions"
    echo "4) Ping host"
    echo "5) Exit"
    read -p "Your choice (1–5): " option

    case "$option" in
        1) show_user_info ;;
        2) list_home_files ;;
        3) create_file_with_permissions ;;
        4) ping_host ;;
        5) echo "Exit..."; break ;;
        *) echo -e "${RED}Invalid option!${NC}" ;;
    esac
done

exit 0
